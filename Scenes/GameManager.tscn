[gd_scene load_steps=2 format=3 uid="uid://ctihnso3ncatl"]

[sub_resource type="GDScript" id="GDScript_4gbyi"]
script/source = "extends Node
class_name GameManager

## Tipe-tipe transisi
enum TransType {
	FADE_BLACK,
	LOADING_SCREEN,
}

## Scene saat ini
var current_scene: Node

## Canvas layer untuk transisi fade black
@onready var fade_black_transition: CanvasLayer = $Transitions/FadeBlack

## Transisi ke scene lain
func scene_transition(trans_type: TransType, next_scene: Node) -> void:
	match trans_type:
		TransType.FADE_BLACK:
			var color_rect: ColorRect = fade_black_transition.get_node(\"ColorRect\")
			fade_black_transition.visible = true
			
			var fade_in: Tween = get_tree().create_tween() # Play fade in to black animation
			fade_in.tween_property(color_rect, \"modulate\", Color(0.0, 0.0, 0.0, 1.0), 1)
			await fade_in.finished
			if current_scene != null:
				current_scene.queue_free() # Remove the node you were from
			current_scene = next_scene
			add_child(next_scene) # Add's the node you want to go to
			
			var fade_out: Tween = get_tree().create_tween() # Play fade out to black animation
			fade_out.tween_property(color_rect, \"modulate\", Color(0.0, 0.0, 0.0, 1.0), 0.5)
			fade_out.tween_property(color_rect, \"modulate\", Color(0.0, 0.0, 0.0, 0.0), 1)
			await fade_out.finished
			
			fade_black_transition.visible = false
		TransType.LOADING_SCREEN:
			pass

## Keluar game
func quit_game() -> void:
	# Logika save file
	get_tree().quit()
"

[node name="GameManager" type="Node"]
script = SubResource("GDScript_4gbyi")

[node name="Transitions" type="Node" parent="."]

[node name="FadeBlack" type="CanvasLayer" parent="Transitions"]
layer = 100
visible = false

[node name="ColorRect" type="ColorRect" parent="Transitions/FadeBlack"]
modulate = Color(1, 1, 1, 0)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
color = Color(0, 0, 0, 1)
